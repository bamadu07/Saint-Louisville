<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Changement de Statut - Administration - Mairie de Saint-Louis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0a3d62;
            --secondary-color: #3c6382;
            --accent-color: #f6b93b;
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --success-color: #4CAF50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --info-color: #2196F3;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --border-radius: 12px;
            --card-radius: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
            font-size: 16px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: white;
            color: var(--dark-color);
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            height: 80px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
            color: var(--dark-color);
        }

        .logo-image {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0;
            overflow: hidden;
            background-color: transparent;
        }

        .logo-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.3s ease;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        .logo:hover .logo-img {
            transform: scale(1.05);
        }

        .logo-text h1 {
            font-size: 1.3rem;
            font-weight: 700;
            line-height: 1.2;
            margin-left: 10px;
            color: var(--primary-color);
        }

        .logo-text span {
            color: var(--accent-color);
            font-weight: 300;
        }

        .logo-text p {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-top: 2px;
            margin-left: 10px;
            color: var(--secondary-color);
        }

        /* Menu déroulant Desktop */
        .desktop-nav {
            display: flex;
            align-items: center;
        }

        .desktop-nav ul {
            display: flex;
            list-style: none;
            gap: 5px;
        }

        .desktop-nav ul li {
            position: relative;
        }

        .desktop-nav ul li a {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--dark-color);
            text-decoration: none;
            font-weight: 500;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .desktop-nav ul li a:hover {
            background-color: rgba(10, 61, 98, 0.1);
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        .desktop-nav ul li a.active {
            background-color: rgba(246, 185, 59, 0.2);
            color: var(--primary-color);
            border-left: 3px solid var(--accent-color);
        }

        .dropdown {
            position: relative;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            min-width: 240px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            padding: 10px 0;
            border: 1px solid rgba(0,0,0,0.1);
        }

        .dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-menu a {
            display: block;
            padding: 12px 20px;
            color: var(--dark-color);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            border-left: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .dropdown-menu a:hover {
            background-color: rgba(10, 61, 98, 0.1);
            color: var(--primary-color);
            border-left-color: var(--accent-color);
            padding-left: 25px;
        }

        .dropdown > a i {
            font-size: 0.8rem;
            margin-left: 5px;
            transition: transform 0.3s ease;
        }

        .dropdown:hover > a i {
            transform: rotate(180deg);
        }

        /* Bouton menu mobile */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--dark-color);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }

        .mobile-menu-btn:hover {
            background-color: rgba(0,0,0,0.05);
        }

        /* Menu mobile */
        .mobile-menu {
            display: none;
            background: white;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 999;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        .mobile-menu.active {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mobile-menu ul {
            list-style: none;
            padding: 0;
        }

        .mobile-menu ul li {
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .mobile-menu ul li:last-child {
            border-bottom: none;
        }

        .mobile-menu ul li a {
            display: block;
            padding: 18px 20px;
            color: var(--dark-color);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
        }

        .mobile-menu ul li a:hover,
        .mobile-menu ul li a.active {
            background-color: rgba(10, 61, 98, 0.1);
            color: var(--primary-color);
            padding-left: 25px;
        }

        /* Sous-menu mobile */
        .mobile-dropdown .mobile-submenu {
            display: none;
            background-color: rgba(0,0,0,0.05);
            padding-left: 20px;
        }

        .mobile-dropdown.active .mobile-submenu {
            display: block;
        }

        .mobile-dropdown .mobile-submenu li {
            border-bottom: none;
        }

        .mobile-dropdown .mobile-submenu a {
            padding: 15px 20px;
            font-size: 0.95rem;
            color: var(--secondary-color);
        }

        .mobile-dropdown .mobile-submenu a:hover {
            color: var(--primary-color);
        }

        .mobile-dropdown > a i {
            float: right;
            transition: transform 0.3s ease;
        }

        .mobile-dropdown.active > a i {
            transform: rotate(180deg);
        }

        /* Contenu principal */
        .admin-container {
            padding: 3rem 0;
            min-height: 70vh;
        }

        .admin-hero {
            background: linear-gradient(135deg, var(--primary-color), #0a3362);
            color: white;
            padding: 2.5rem 1.5rem;
            border-radius: var(--card-radius);
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .admin-hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(246, 185, 59, 0.1) 0%, transparent 70%);
        }

        .admin-hero h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .admin-hero .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 1rem;
            position: relative;
        }

        .admin-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            position: relative;
        }

        /* Formulaire admin */
        .admin-form-section {
            background: white;
            border-radius: var(--card-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .admin-form-section h2 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark-color);
        }

        .form-control {
            width: 100%;
            padding: 0.875rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: all 0.3s ease;
            background-color: #f9f9f9;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(10, 61, 98, 0.1);
            background-color: white;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        @media (min-width: 768px) {
            .form-row {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* Badge de statut */
        .status-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .status-enregistre { background: #e3f2fd; color: #1565c0; }
        .status-verification { background: #fff3e0; color: #ef6c00; }
        .status-traitement { background: #fff8e1; color: #ff8f00; }
        .status-valide { background: #e8f5e9; color: #2e7d32; }
        .status-rejete { background: #ffebee; color: #c62828; }
        .status-archive { background: #f5f5f5; color: #616161; }

        /* Boutons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 0.875rem 1.5rem;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            text-align: center;
            font-size: 1rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn i {
            font-size: 1rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #0a3362;
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }

        /* Détails de la demande */
        .demande-details {
            background: white;
            border-radius: var(--card-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            display: none;
        }

        .demande-details.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .details-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .details-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        @media (min-width: 768px) {
            .details-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .detail-item h4 {
            color: var(--secondary-color);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-item p {
            font-size: 1.1rem;
            color: var(--dark-color);
        }

        /* Formulaire de changement de statut */
        .changement-statut-form {
            background: white;
            border-radius: var(--card-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            display: none;
        }

        .changement-statut-form.active {
            display: block;
        }

        .statut-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .statut-option {
            padding: 1.5rem;
            border: 2px solid #eee;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .statut-option:hover {
            border-color: var(--primary-color);
            background: #f8f9ff;
        }

        .statut-option.selected {
            border-color: var(--accent-color);
            background: #fff8e8;
        }

        .statut-option i {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        /* Historique des changements */
        .historique-section {
            background: white;
            border-radius: var(--card-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            display: none;
        }

        .historique-section.active {
            display: block;
        }

        .historique-timeline {
            margin-top: 1.5rem;
        }

        .timeline-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            border-left: 3px solid #eee;
            margin-bottom: 1rem;
            position: relative;
        }

        .timeline-item:last-child {
            margin-bottom: 0;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 1.5rem;
            width: 13px;
            height: 13px;
            border-radius: 50%;
            background: #ddd;
        }

        .timeline-item.important::before {
            background: var(--accent-color);
        }

        .timeline-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary-color);
            flex-shrink: 0;
        }

        .timeline-content h5 {
            color: var(--primary-color);
            margin-bottom: 0.25rem;
        }

        .timeline-content p {
            color: var(--secondary-color);
            font-size: 0.9rem;
        }

        .timeline-date {
            font-size: 0.8rem;
            color: #999;
            margin-top: 0.25rem;
        }

        /* Messages d'alerte */
        .alert {
            padding: 1rem 1.25rem;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            display: none;
            animation: slideIn 0.3s ease;
        }

        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .alert-info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        /* Tableau des résultats */
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .results-table th {
            background: #f8f9fa;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--primary-color);
            border-bottom: 2px solid #e9ecef;
        }

        .results-table td {
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
        }

        .results-table tr:hover {
            background-color: #f8f9fa;
        }

        /* Footer */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 3rem 0 1.5rem;
            margin-top: 3rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 2rem;
        }

        @media (min-width: 768px) {
            .footer-content {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .footer-logo h3 {
            color: var(--accent-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .footer-links h4, .footer-contact h4 {
            color: var(--accent-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links ul li {
            margin-bottom: 8px;
        }

        .footer-links ul li a {
            color: #ddd;
            text-decoration: none;
            transition: color 0.3s ease;
            font-size: 0.95rem;
        }

        .footer-links ul li a:hover {
            color: var(--accent-color);
        }

        .footer-contact p {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
        }

        .footer-contact i {
            width: 20px;
            color: var(--accent-color);
        }

        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.85rem;
            color: #aaa;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .desktop-nav {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .logo-image {
                width: 50px;
                height: 50px;
            }
            
            .logo-text h1 {
                font-size: 1.1rem;
            }
            
            .logo-text p {
                font-size: 0.7rem;
            }
            
            .admin-hero h1 {
                font-size: 2rem;
            }
            
            .admin-hero .subtitle {
                font-size: 1rem;
            }
            
            .results-table {
                display: block;
                overflow-x: auto;
            }
        }

        @media (min-width: 768px) {
            .admin-hero {
                padding: 3rem 2rem;
            }
            
            .admin-hero h1 {
                font-size: 2.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header avec navigation -->
    <header>
        <div class="header-container">
            <a href="index.html" class="logo">
                <div class="logo-image">
                    <img src="images/logomairi2.png" 
                         alt="Logo Mairie de Saint-Louis" 
                         class="logo-img">
                </div>
                <div class="logo-text">
                    <h1>Mairie de <span>Saint-Louis</span></h1>
                    <p>Sénégal - Patrimoine UNESCO</p>
                </div>
            </a>
            
            <!-- Navbar Desktop -->
            <nav class="desktop-nav">
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="ville.html">La Ville</a></li>
                    <li><a href="mairie.html">Histoire & Patrimoine</a></li>
                    <li class="dropdown">
                        <a href="demarches.html">Démarches en ligne <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-menu">
                            <a href="demarches.html#actes">Formulaire d'état civil</a>
                            <a href="suivi-demandes.html">Tableau de suivi</a>
                            <a href="changement-statut.html" class="active">Changement de statut</a>
                            <a href="demarches.html#rdv">Prise de rendez-vous</a>
                            <a href="demarches.html#contact-maire">Contact avec le Maire</a>
                        </div>
                    </li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
            
            <!-- Bouton menu mobile -->
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <!-- Menu mobile -->
        <div class="mobile-menu" id="mobileMenu">
            <ul>
                <li><a href="index.html">Accueil</a></li>
                <li><a href="ville.html">La Ville</a></li>
                <li><a href="mairie.html">Histoire & Patrimoine</a></li>
                <li class="mobile-dropdown">
                    <a href="demarches.html" class="active">Démarches en ligne <i class="fas fa-chevron-down"></i></a>
                    <ul class="mobile-submenu">
                        <li><a href="demarches.html#actes">Formulaire d'état civil</a></li>
                        <li><a href="suivi-demandes.html">Tableau de suivi</a></li>
                        <li><a href="changement-statut.html">Changement de statut</a></li>
                        <li><a href="demarches.html#rdv">Prise de rendez-vous</a></li>
                        <li><a href="demarches.html#contact-maire">Contact avec le Maire</a></li>
                    </ul>
                </li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </header>

    <!-- Contenu principal -->
    <main class="container">
        <section class="admin-container">
            <!-- Interface admin directement accessible -->
            <div id="adminInterface">
                <!-- En-tête admin -->
                <div class="admin-hero">
                    <h1>Gestion des Demandes - Administration</h1>
                    <p class="subtitle">Interface de gestion et changement de statut des demandes administratives</p>
                    <div class="admin-badge">
                        <i class="fas fa-user-shield"></i>
                        <span>Interface administrative - Mairie de Saint-Louis</span>
                    </div>
                </div>

                <!-- Messages d'alerte -->
                <div class="alert alert-success" id="successMessage" style="display: none;"></div>
                <div class="alert alert-error" id="errorMessage" style="display: none;"></div>
                <div class="alert alert-info" id="infoMessage" style="display: none;">
                    <i class="fas fa-info-circle"></i> Cette interface est réservée au personnel administratif de la mairie.
                </div>

                <!-- Recherche de demande -->
                <div class="admin-form-section">
                    <h2><i class="fas fa-search"></i> Rechercher une demande</h2>
                    <form id="searchForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="searchDossier">Numéro de dossier</label>
                                <input type="text" id="searchDossier" class="form-control" placeholder="Ex: SL-2023-05874">
                            </div>
                            
                            <div class="form-group">
                                <label for="searchNom">Nom du demandeur</label>
                                <input type="text" id="searchNom" class="form-control" placeholder="Nom de famille">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="searchType">Type de demande</label>
                                <select id="searchType" class="form-control">
                                    <option value="">Tous les types</option>
                                    <option value="naissance">Acte de naissance</option>
                                    <option value="mariage">Acte de mariage</option>
                                    <option value="deces">Acte de décès</option>
                                    <option value="copie">Copie intégrale</option>
                                    <option value="rdv">Rendez-vous</option>
                                    <option value="contact">Contact</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="searchStatut">Statut actuel</label>
                                <select id="searchStatut" class="form-control">
                                    <option value="">Tous les statuts</option>
                                    <option value="enregistre">Enregistré</option>
                                    <option value="verification">En vérification</option>
                                    <option value="traitement">En traitement</option>
                                    <option value="valide">Validé</option>
                                    <option value="rejete">Rejeté</option>
                                    <option value="archive">Archivé</option>
                                </select>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-search"></i> Rechercher
                        </button>
                        <button type="button" id="resetSearch" class="btn btn-secondary">
                            <i class="fas fa-redo"></i> Réinitialiser
                        </button>
                    </form>
                </div>

                <!-- Résultats de recherche -->
                <div class="admin-form-section" id="searchResults" style="display: none;">
                    <h2><i class="fas fa-list"></i> Résultats de recherche</h2>
                    <div style="overflow-x: auto;">
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Numéro</th>
                                    <th>Type</th>
                                    <th>Demandeur</th>
                                    <th>Date dépôt</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="resultsTable">
                                <!-- Les résultats seront affichés ici -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Détails de la demande sélectionnée -->
                <div class="demande-details" id="demandeDetails">
                    <div class="details-header">
                        <h3>Détails de la demande</h3>
                        <div>
                            <span class="status-badge" id="currentStatus">Enregistré</span>
                        </div>
                    </div>
                    
                    <div class="details-grid" id="detailsContent">
                        <!-- Les détails seront affichés ici -->
                    </div>
                    
                    <div style="margin-top: 2rem; text-align: center;">
                        <button class="btn btn-primary" id="changerStatutBtn">
                            <i class="fas fa-exchange-alt"></i> Changer le statut
                        </button>
                        <button class="btn btn-secondary" id="voirHistoriqueBtn">
                            <i class="fas fa-history"></i> Voir l'historique
                        </button>
                        <button class="btn btn-success" id="genererDocumentBtn">
                            <i class="fas fa-file-pdf"></i> Générer le document
                        </button>
                    </div>
                </div>

                <!-- Formulaire de changement de statut -->
                <div class="changement-statut-form" id="changementStatutForm">
                    <h2><i class="fas fa-exchange-alt"></i> Changer le statut de la demande</h2>
                    <p>Demande : <strong id="demandeNumero">SL-2023-00000</strong></p>
                    
                    <div class="form-group">
                        <label>Nouveau statut *</label>
                        <div class="statut-options" id="statutOptions">
                            <div class="statut-option" data-value="enregistre">
                                <i class="fas fa-inbox text-primary"></i>
                                <div>Enregistré</div>
                            </div>
                            <div class="statut-option" data-value="verification">
                                <i class="fas fa-search text-warning"></i>
                                <div>En vérification</div>
                            </div>
                            <div class="statut-option" data-value="traitement">
                                <i class="fas fa-cogs text-info"></i>
                                <div>En traitement</div>
                            </div>
                            <div class="statut-option" data-value="valide">
                                <i class="fas fa-check-circle text-success"></i>
                                <div>Validé</div>
                            </div>
                            <div class="statut-option" data-value="rejete">
                                <i class="fas fa-times-circle text-danger"></i>
                                <div>Rejeté</div>
                            </div>
                            <div class="statut-option" data-value="archive">
                                <i class="fas fa-archive text-secondary"></i>
                                <div>Archivé</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="statutComment">Commentaire (optionnel)</label>
                        <textarea id="statutComment" class="form-control" rows="3" 
                                  placeholder="Raison du changement, informations supplémentaires..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="notifierClient">Notification</label>
                        <div>
                            <label style="display: flex; align-items: center; gap: 10px;">
                                <input type="checkbox" id="notifierClient" checked>
                                <span>Notifier le demandeur par email</span>
                            </label>
                            <small style="display: block; margin-top: 5px; color: #666;">
                                Un email sera envoyé au demandeur pour l'informer du changement de statut.
                            </small>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button type="button" class="btn btn-primary" id="saveStatutBtn">
                            <i class="fas fa-save"></i> Enregistrer le changement
                        </button>
                        <button type="button" class="btn btn-secondary" id="cancelStatutBtn">
                            <i class="fas fa-times"></i> Annuler
                        </button>
                    </div>
                </div>

                <!-- Historique des changements -->
                <div class="historique-section" id="historiqueSection">
                    <div class="details-header">
                        <h3><i class="fas fa-history"></i> Historique des modifications</h3>
                        <button class="btn btn-sm btn-secondary" id="closeHistoriqueBtn">
                            <i class="fas fa-times"></i> Fermer
                        </button>
                    </div>
                    
                    <p>Demande : <strong id="historiqueNumero">SL-2023-00000</strong></p>
                    
                    <div class="historique-timeline" id="historiqueTimeline">
                        <!-- L'historique sera affiché ici -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h3>Mairie de Saint-Louis</h3>
                    <p>Première ville française d'Afrique de l'Ouest, classée au patrimoine mondial de l'UNESCO depuis l'an 2000.</p>
                </div>
                
                <div class="footer-links">
                    <h4>Liens utiles</h4>
                    <ul>
                        <li><a href="index.html">Accueil</a></li>
                        <li><a href="ville.html">La Ville</a></li>
                        <li><a href="mairie.html">Histoire & Patrimoine</a></li>
                        <li><a href="demarches.html">Démarches en ligne</a></li>
                        <li><a href="blog.html"><i class="fas fa-newspaper"></i> Blog</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-contact">
                    <h4>Contact rapide</h4>
                    <p><i class="fas fa-phone"></i> +221 33 961 10 10</p>
                    <p><i class="fas fa-envelope"></i> contact@mairie-saintlouis.sn</p>
                    <p><i class="fas fa-map-marker-alt"></i> Place Faidherbe, Île de Saint-Louis, Sénégal</p>
                    <p><i class="fas fa-clock"></i> Lundi-Vendredi: 8h-16h</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 Mairie de Saint-Louis/BCMGROUP</p>
                
            </div>
        </div>
    </footer>

    <script>
        // Données de démonstration pour les demandes
        const demandes = [
            {
                id: "SL-2023-05874",
                type: "Acte de naissance",
                dateDepot: "2023-10-15",
                demandeur: "Amadou Diop",
                email: "amadou.diop@example.com",
                telephone: "+221 77 123 45 67",
                adresse: "Rue Blaise Diagne, Saint-Louis",
                motif: "Passeport",
                statut: "traitement",
                commentaire: "Demande standard",
                service: "État Civil",
                agent: "Marie Ndiaye",
                historique: [
                    {
                        date: "2023-10-15 09:30",
                        statut: "enregistre",
                        agent: "Système",
                        commentaire: "Demande reçue en ligne"
                    },
                    {
                        date: "2023-10-16 14:20",
                        statut: "verification",
                        agent: "Marie Ndiaye",
                        commentaire: "Vérification des informations"
                    },
                    {
                        date: "2023-10-20 11:15",
                        statut: "traitement",
                        agent: "Marie Ndiaye",
                        commentaire: "Document en cours de préparation"
                    }
                ]
            },
            {
                id: "SL-2023-05875",
                type: "Acte de mariage",
                dateDepot: "2023-10-16",
                demandeur: "Fatou Sow",
                email: "fatou.sow@example.com",
                telephone: "+221 76 987 65 43",
                adresse: "Avenue Jean Mermoz, Saint-Louis",
                motif: "Succession",
                statut: "valide",
                commentaire: "Document prêt à être retiré",
                service: "État Civil",
                agent: "Ibrahima Fall",
                historique: [
                    {
                        date: "2023-10-16 10:45",
                        statut: "enregistre",
                        agent: "Système",
                        commentaire: "Demande reçue en ligne"
                    },
                    {
                        date: "2023-10-17 15:30",
                        statut: "verification",
                        agent: "Ibrahima Fall",
                        commentaire: "Vérification terminée"
                    },
                    {
                        date: "2023-10-18 09:15",
                        statut: "valide",
                        agent: "Ibrahima Fall",
                        commentaire: "Document validé et prêt"
                    }
                ]
            },
            {
                id: "SL-2023-05876",
                type: "Acte de décès",
                dateDepot: "2023-10-14",
                demandeur: "Jean Diallo",
                email: "jean.diallo@example.com",
                telephone: "+221 70 456 78 90",
                adresse: "Quai Roume, Saint-Louis",
                motif: "Succession",
                statut: "verification",
                commentaire: "En attente de pièces complémentaires",
                service: "État Civil",
                agent: "Aminata Kane",
                historique: [
                    {
                        date: "2023-10-14 16:20",
                        statut: "enregistre",
                        agent: "Système",
                        commentaire: "Demande reçue en ligne"
                    },
                    {
                        date: "2023-10-19 10:00",
                        statut: "verification",
                        agent: "Aminata Kane",
                        commentaire: "Demande de pièces complémentaires"
                    }
                ]
            },
            {
                id: "SL-2023-05877",
                type: "Copie intégrale",
                dateDepot: "2023-10-18",
                demandeur: "Moussa Ndiaye",
                email: "moussa.ndiaye@example.com",
                telephone: "+221 78 234 56 78",
                adresse: "Rue du Général de Gaulle, Saint-Louis",
                motif: "Procédure administrative",
                statut: "enregistre",
                commentaire: "Nouvelle demande",
                service: "État Civil",
                agent: "Système",
                historique: [
                    {
                        date: "2023-10-18 14:30",
                        statut: "enregistre",
                        agent: "Système",
                        commentaire: "Demande reçue en ligne"
                    }
                ]
            },
            {
                id: "SL-2023-05878",
                type: "Acte de naissance",
                dateDepot: "2023-10-12",
                demandeur: "Aïssatou Fall",
                email: "aissatou.fall@example.com",
                telephone: "+221 77 345 67 89",
                adresse: "Boulevard de la République, Saint-Louis",
                motif: "Carte d'identité",
                statut: "rejete",
                commentaire: "Informations incomplètes",
                service: "État Civil",
                agent: "Marie Ndiaye",
                historique: [
                    {
                        date: "2023-10-12 11:20",
                        statut: "enregistre",
                        agent: "Système",
                        commentaire: "Demande reçue en ligne"
                    },
                    {
                        date: "2023-10-13 16:45",
                        statut: "verification",
                        agent: "Marie Ndiaye",
                        commentaire: "Informations manquantes identifiées"
                    },
                    {
                        date: "2023-10-17 10:15",
                        statut: "rejete",
                        agent: "Marie Ndiaye",
                        commentaire: "Demande rejetée - informations incomplètes"
                    }
                ]
            }
        ];

        // Traduction des statuts
        const statutsLabels = {
            "enregistre": "Enregistré",
            "verification": "En vérification",
            "traitement": "En traitement",
            "valide": "Validé",
            "rejete": "Rejeté",
            "archive": "Archivé"
        };

        // Traduction des types
        const typesLabels = {
            "naissance": "Acte de naissance",
            "mariage": "Acte de mariage",
            "deces": "Acte de décès",
            "copie": "Copie intégrale"
        };

        // Variables globales
        let currentDemande = null;

        // Fonction pour formater une date
        function formatDate(dateString, includeTime = false) {
            const date = new Date(dateString);
            if (includeTime) {
                return date.toLocaleString('fr-FR', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            return date.toLocaleDateString('fr-FR');
        }

        // Afficher le message d'info au chargement
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('infoMessage').style.display = 'block';
        });

        // Recherche de demande
        document.getElementById('searchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const dossier = document.getElementById('searchDossier').value.trim();
            const nom = document.getElementById('searchNom').value.trim().toLowerCase();
            const type = document.getElementById('searchType').value;
            const statut = document.getElementById('searchStatut').value;
            
            let results = demandes;
            
            // Appliquer les filtres
            if (dossier) {
                results = results.filter(d => d.id.toLowerCase().includes(dossier.toLowerCase()));
            }
            
            if (nom) {
                results = results.filter(d => d.demandeur.toLowerCase().includes(nom));
            }
            
            if (type) {
                results = results.filter(d => d.type.toLowerCase().includes(type));
            }
            
            if (statut) {
                results = results.filter(d => d.statut === statut);
            }
            
            displayResults(results);
        });

        // Réinitialisation de la recherche
        document.getElementById('resetSearch').addEventListener('click', function() {
            document.getElementById('searchForm').reset();
            document.getElementById('searchResults').style.display = 'none';
            document.getElementById('demandeDetails').classList.remove('active');
            currentDemande = null;
        });

        // Afficher les résultats de recherche
        function displayResults(results) {
            const resultsContainer = document.getElementById('resultsTable');
            const searchResultsSection = document.getElementById('searchResults');
            
            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 2rem; color: #666;">
                            <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 1rem; display: block;"></i>
                            <h4 style="margin: 0;">Aucune demande trouvée</h4>
                            <p style="margin-top: 0.5rem;">Essayez avec d'autres critères de recherche.</p>
                        </td>
                    </tr>
                `;
                searchResultsSection.style.display = 'block';
                return;
            }
            
            let html = '';
            
            results.forEach(demande => {
                const statusClass = `status-${demande.statut}`;
                const statusLabel = statutsLabels[demande.statut] || demande.statut;
                
                html += `<tr>`;
                html += `<td><strong>${demande.id}</strong></td>`;
                html += `<td>${demande.type}</td>`;
                html += `<td>${demande.demandeur}</td>`;
                html += `<td>${formatDate(demande.dateDepot)}</td>`;
                html += `<td><span class="status-badge ${statusClass}">${statusLabel}</span></td>`;
                html += `<td>
                            <button class="btn btn-sm btn-primary" onclick="selectDemande('${demande.id}')">
                                <i class="fas fa-eye"></i> Voir
                            </button>
                         </td>`;
                html += `</tr>`;
            });
            
            resultsContainer.innerHTML = html;
            searchResultsSection.style.display = 'block';
            
            // Faire défiler vers les résultats
            searchResultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Sélectionner une demande
        window.selectDemande = function(demandeId) {
            currentDemande = demandes.find(d => d.id === demandeId);
            
            if (currentDemande) {
                displayDemandeDetails(currentDemande);
                document.getElementById('searchResults').style.display = 'none';
                document.getElementById('demandeDetails').classList.add('active');
                document.getElementById('changementStatutForm').classList.remove('active');
                document.getElementById('historiqueSection').classList.remove('active');
                
                // Faire défiler vers les détails
                document.getElementById('demandeDetails').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        };

        // Afficher les détails d'une demande
        function displayDemandeDetails(demande) {
            const statusClass = `status-${demande.statut}`;
            const statusLabel = statutsLabels[demande.statut] || demande.statut;
            
            document.getElementById('currentStatus').className = `status-badge ${statusClass}`;
            document.getElementById('currentStatus').textContent = statusLabel;
            
            let detailsHtml = `
                <div class="detail-item">
                    <h4>Numéro de dossier</h4>
                    <p>${demande.id}</p>
                </div>
                <div class="detail-item">
                    <h4>Type de demande</h4>
                    <p>${demande.type}</p>
                </div>
                <div class="detail-item">
                    <h4>Demandeur</h4>
                    <p>${demande.demandeur}</p>
                </div>
                <div class="detail-item">
                    <h4>Date de dépôt</h4>
                    <p>${formatDate(demande.dateDepot)}</p>
                </div>
                <div class="detail-item">
                    <h4>Email</h4>
                    <p>${demande.email}</p>
                </div>
                <div class="detail-item">
                    <h4>Téléphone</h4>
                    <p>${demande.telephone}</p>
                </div>
                <div class="detail-item">
                    <h4>Adresse</h4>
                    <p>${demande.adresse}</p>
                </div>
                <div class="detail-item">
                    <h4>Motif</h4>
                    <p>${demande.motif}</p>
                </div>
                <div class="detail-item">
                    <h4>Service traitant</h4>
                    <p>${demande.service}</p>
                </div>
                <div class="detail-item">
                    <h4>Agent responsable</h4>
                    <p>${demande.agent}</p>
                </div>
                <div class="detail-item">
                    <h4>Commentaire</h4>
                    <p>${demande.commentaire || "Aucun commentaire"}</p>
                </div>
            `;
            
            document.getElementById('detailsContent').innerHTML = detailsHtml;
        }

        // Bouton pour changer le statut
        document.getElementById('changerStatutBtn').addEventListener('click', function() {
            if (!currentDemande) {
                showErrorMessage("Veuillez d'abord sélectionner une demande.");
                return;
            }
            
            document.getElementById('demandeDetails').classList.remove('active');
            document.getElementById('changementStatutForm').classList.add('active');
            document.getElementById('demandeNumero').textContent = currentDemande.id;
            
            // Réinitialiser la sélection des statuts
            document.querySelectorAll('.statut-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Faire défiler vers le formulaire
            document.getElementById('changementStatutForm').scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        // Sélection d'un statut
        document.querySelectorAll('.statut-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.statut-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
            });
        });

        // Annuler le changement de statut
        document.getElementById('cancelStatutBtn').addEventListener('click', function() {
            document.getElementById('changementStatutForm').classList.remove('active');
            document.getElementById('demandeDetails').classList.add('active');
        });

        // Enregistrer le changement de statut
        document.getElementById('saveStatutBtn').addEventListener('click', function() {
            const selectedOption = document.querySelector('.statut-option.selected');
            if (!selectedOption) {
                showErrorMessage("Veuillez sélectionner un nouveau statut.");
                return;
            }
            
            const nouveauStatut = selectedOption.dataset.value;
            const commentaire = document.getElementById('statutComment').value.trim();
            const notifier = document.getElementById('notifierClient').checked;
            
            if (nouveauStatut === currentDemande.statut) {
                showErrorMessage("Le nouveau statut est identique au statut actuel.");
                return;
            }
            
            // Ajouter à l'historique
            const historiqueEntry = {
                date: new Date().toISOString(),
                statut: nouveauStatut,
                agent: "Administrateur",
                commentaire: commentaire || "Changement de statut"
            };
            
            currentDemande.historique.push(historiqueEntry);
            currentDemande.statut = nouveauStatut;
            
            // Mettre à jour l'affichage
            displayDemandeDetails(currentDemande);
            
            // Afficher le message de succès
            let successMessage = `Le statut de la demande ${currentDemande.id} a été changé en <strong>${statutsLabels[nouveauStatut]}</strong>.`;
            if (notifier) {
                successMessage += " Le demandeur a été notifié par email.";
            }
            showSuccessMessage(successMessage);
            
            // Retourner aux détails
            document.getElementById('changementStatutForm').classList.remove('active');
            document.getElementById('demandeDetails').classList.add('active');
            document.getElementById('statutComment').value = '';
        });

        // Voir l'historique
        document.getElementById('voirHistoriqueBtn').addEventListener('click', function() {
            if (!currentDemande) {
                showErrorMessage("Veuillez d'abord sélectionner une demande.");
                return;
            }
            
            document.getElementById('demandeDetails').classList.remove('active');
            document.getElementById('historiqueSection').classList.add('active');
            document.getElementById('historiqueNumero').textContent = currentDemande.id;
            
            displayHistorique(currentDemande.historique);
            
            // Faire défiler vers l'historique
            document.getElementById('historiqueSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        // Afficher l'historique
        function displayHistorique(historique) {
            const timeline = document.getElementById('historiqueTimeline');
            let html = '';
            
            // Trier l'historique par date (du plus récent au plus ancien)
            const sortedHistorique = [...historique].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedHistorique.forEach((entry, index) => {
                const isImportant = index === 0; // Le dernier changement est important
                const statusLabel = statutsLabels[entry.statut] || entry.statut;
                const iconClass = getIconForStatus(entry.statut);
                
                html += `
                    <div class="timeline-item ${isImportant ? 'important' : ''}">
                        <div class="timeline-icon">
                            <i class="${iconClass}"></i>
                        </div>
                        <div class="timeline-content">
                            <h5>${statusLabel}</h5>
                            <p>${entry.commentaire}</p>
                            <div class="timeline-date">
                                ${formatDate(entry.date, true)} - Par ${entry.agent}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            timeline.innerHTML = html || `
                <div style="text-align: center; padding: 2rem; color: #666;">
                    <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 1rem; display: block;"></i>
                    <h4 style="margin: 0;">Aucun historique disponible</h4>
                </div>
            `;
        }

        // Fermer l'historique
        document.getElementById('closeHistoriqueBtn').addEventListener('click', function() {
            document.getElementById('historiqueSection').classList.remove('active');
            document.getElementById('demandeDetails').classList.add('active');
        });

        // Générer un document
        document.getElementById('genererDocumentBtn').addEventListener('click', function() {
            if (!currentDemande) {
                showErrorMessage("Veuillez d'abord sélectionner une demande.");
                return;
            }
            
            showSuccessMessage(`Le document pour la demande ${currentDemande.id} a été généré avec succès.`);
            
            // Dans une vraie application, on téléchargerait le PDF
            // Simuler un téléchargement
            setTimeout(() => {
                const docTypes = {
                    "Acte de naissance": "acte_naissance",
                    "Acte de mariage": "acte_mariage",
                    "Acte de décès": "acte_deces",
                    "Copie intégrale": "copie_integrale"
                };
                
                const docType = docTypes[currentDemande.type] || "document";
                alert(`Document ${currentDemande.id}.pdf généré avec succès !\n\nType: ${docType}_${currentDemande.id}.pdf`);
            }, 500);
        });

        // Obtenir l'icône pour un statut
        function getIconForStatus(statut) {
            switch(statut) {
                case 'enregistre': return 'fas fa-inbox text-primary';
                case 'verification': return 'fas fa-search text-warning';
                case 'traitement': return 'fas fa-cogs text-info';
                case 'valide': return 'fas fa-check-circle text-success';
                case 'rejete': return 'fas fa-times-circle text-danger';
                case 'archive': return 'fas fa-archive text-secondary';
                default: return 'fas fa-info-circle';
            }
        }

        // Afficher un message de succès
        function showSuccessMessage(message) {
            const alert = document.getElementById('successMessage');
            alert.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
            alert.style.display = 'block';
            
            // Masquer après 5 secondes
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
            
            // Faire défiler vers le message
            alert.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Afficher un message d'erreur
        function showErrorMessage(message) {
            const alert = document.getElementById('errorMessage');
            alert.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${message}`;
            alert.style.display = 'block';
            
            // Masquer après 5 secondes
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
            
            // Faire défiler vers le message
            alert.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Gestion du menu mobile
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');

            mobileMenuBtn.addEventListener('click', function() {
                mobileMenu.classList.toggle('active');
                this.innerHTML = mobileMenu.classList.contains('active') ? 
                    '<i class="fas fa-times"></i>' : 
                    '<i class="fas fa-bars"></i>';
            });

            // Gestion du sous-menu mobile
            document.querySelectorAll('.mobile-dropdown > a').forEach(dropdown => {
                dropdown.addEventListener('click', function(e) {
                    e.preventDefault();
                    const parent = this.parentElement;
                    parent.classList.toggle('active');
                    
                    document.querySelectorAll('.mobile-dropdown').forEach(other => {
                        if (other !== parent) other.classList.remove('active');
                    });
                });
            });
        });
    </script>
</body>
</html>